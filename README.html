<h1>NBA Basketball Data Analytics</h1>

<br />
<br />

<h2>Project Description</h2>
<p>I started this project to marry two of my biggest passions: basketball and data. Using NBA teams' previous game performance statistics, I wanted to see if I could reliably predict the winner of a matchup between two teams. Using this information, I also wanted to see if I could profitably place moneyline bets.</p>

<p>For this project, I downloaded teams' game statistics (as opposed to players' statistics) from 1995 to 2016 from <a href='http://sportsdatabase.com/nba/query' target='_blank'>SportsDatabase.com</a>.</p>

<p>
I also scraped betting odds data from <a href='http://www.sportsbookreview.com/betting-odds/nba-basketball/' target='_blank'>SportsbookReview</a>, which contained payouts, moneyline, and spreads data from 2006 to 2016.
</p>


<br />
<br />

<h2>Directory Structure</h2>

<b>./analysis</b> directory is used to store all code and data necessary for the analysis aspect of this project<br />
<b>./app</b> directory will be used to store all code necessary to host a functional web application (e.g. PHP).<br />
<b>./shared_action</b> directory will be used to store all code necessary that are shared between <b>analysis/</b> and <b>app/</b> directories.


<pre>
    <code>
.
├── README.html
├── analysis
│   ├── code
│   │   ├── _analysis_scripts
│   │   │   ├── analysis_funcs.R
│   │   │   ├── exploratory.R
│   │   │   ├── feature_selection_funcs.R
│   │   │   ├── functions.R
│   │   │   ├── payout_and_expected_val_funcs.R
│   │   │   ├── pred_funcs.R
│   │   │   ├── pred_funcs2.R
│   │   │   └── supervised_summarizer_funcs.R
│   │   ├── _data_download_scripts
│   │   │   ├── combine_dataset_files.R
│   │   │   ├── daily_data_download.R
│   │   │   ├── data_grab_funcs.R
│   │   │   ├── download_initial_raw_odds.R
│   │   │   ├── get_raw_data.R
│   │   │   ├── gm_download_by_season.R
│   │   │   └── update_db.R
│   │   ├── _other_scripts
│   │   │   ├── classes.R
│   │   │   ├── helper_funcs.R
│   │   │   └── new_func_dev.R
│   │   ├── _preprocess_scripts
│   │   │   ├── mov_cnt_sum_avg_funcs.R
│   │   │   ├── preprocess_funcs.R
│   │   │   └── rnk_grp_funcs.R
│   │   ├── script0.R
│   │   ├── script1.R
│   │   ├── script2.R
│   │   ├── script3.R
│   │   ├── script4.R
│   │   ├── script5_track1.R
│   │   ├── script5_track2.R
│   │   ├── script5_track3.R
│   │   ├── script5_track4.R
│   │   ├── script5_track5.R
│   │   ├── script6_track1.R
│   │   ├── script6_track2.R
│   │   ├── script7.R
│   │   ├── script8.R
│   │   └── script9.R
│   ├── data
│   │   ├── games.csv
│   │   ├── master_backup.csv
│   │   ├── master_backup2.csv
│   │   ├── master_backup3.csv
│   │   ├── master_backup4.csv
│   │   ├── master_backup5.csv
│   │   ├── master_backup6.csv
│   │   ├── predictive_df.csv
│   │   ├── raw
│   │   │   ├── games.csv
│   │   │   ├── moneylines.csv
│   │   │   ├── spreads.csv
│   │   │   └── totals.csv
│   │   ├── teams_cities_conferences.csv
│   │   └── train.csv
│   ├── figures
│   ├── nba-basketball-research.Rproj
│   └── resources.txt
├── app
│   └── index.php
├── credentials
│   └── keys.R
├── log
├── shared_actions
│   ├── db_setup.sql
│   └── local_mysql_console_access.txt
└── shared_data
    ├── raw_in_queue
    │   ├── games
    │   ├── moneylines
    │   ├── spreads
    │   ├── test
    │   │   ├── spreads_20061031.csv
    │   │   ├── spreads_20061101.csv
    │   │   └── spreads_20061102.csv
    │   └── totals
    └── raw_stored_in_db
        ├── games
        │   ├── games_1995.csv
        │   ├── ...
        │   └── games_2016.csv
        ├── moneylines
        │   ├── moneylines_20061031.csv
        │   ├── ...
        │   └── moneylines_20170612.csv
        ├── spreads
        │   ├── spreads_20061031.csv
        │   ├── ...
        │   └── spreads_20170612.csv
        └── totals
            ├── totals_20061031.csv
            ├── ...
            └── totals_20170612.csv
    </code>
</pre>

<br />
<br />


<h2>Setup Steps</h2>

I used R programming language to get data, clean it, and place into a local MySQL database. But for the purpose of simply following the analysis, there's no need to pull data from a database. To see the analysis in action, one can simple run R scripts sequentially (starting from script0.R), which are found inside <b>./analysis/code</b> directory.

<br />
<br />


<h2>Data Sources</h2>
<ul>
    <li><a href='http://sportsdatabase.com/nba/query' target='_blank'>SportsDatabase.com</a>: box statistics from 1995 through 2016 seasons</li>
    <li><a href='http://www.sportsbookreview.com/betting-odds/nba-basketball/' target='_blank'>SportsbookReview</a>: moneyline odds, point spreads, total lines, payouts from 2006 through 2016 seasons</li>    
</ul>


<br />
<br />


<h2>Code Action Description</h2>


<b>shared_actions/db_setup.sql</b><br />
- create a MySql database and tables to store data.
<br /><br />

<b>analysis/code/script0.R</b><br />
- load libraries, functions, classes, and data for analysis
<br /><br />

<b>analysis/code/script1.R</b><br />
- rename metric labels, add additional metrics derived from original metrics (such as percentages), and join different datasets to create "master" dataset</li>
<br /><br />

<b>analysis/code/script2.R</b><br />
- apply "juice propagation" algorithm<br />
- identify metrics that were most relevant to teams' wins<br />
- using performance metrics that were most relevant to teams' wins, derive <b>general</b> moving average (MA) metrics (e.g. field percentage moving average)<br />
- add offensive/defensive rankings (A/B/C) by teams' MA performance placements in respect to those of other teams<br />
- derive <b>variable-specific</b> moving average metrics (e.g. FGP moving average @ home, FGP moving average @ way, FGP moving average against Eastern Conference teams, etc.)<br />
- add general and variable-specific win percentages

<br /><br />

<b>analysis/code/script3.R</b><br />
- separate dataset into train and test datasets<br />
- visualize variable importance via plots<br />
- rank variable importance using "minimum redundancy maximum relevance feature selection" (http://home.penglab.com/proj/mRMR/)
<br /><br />

<b>analysis/code/script4.R</b><br />
- visualize win percentage accuracy of different performance moving average metrics
<br /><br />

<b>analysis/code/script5.R (various tracks)</b><br />
- predictor variables selection<br />
- model creation and predictive performance testing<br />
<br /><br />

<b>analysis/code/script6.R (various tracks)</b><br />
- metric ensembling (using combination of best-performing metrics<br />
- back-testing<br />
<br /><br />


<!--
<h2>Some Notable Metrics</h2>
<br /><br />

<h2>Betting Placements</h2>


<h2>Backtesting</h2>
-->



<h2>Future Plans</h2>
<ul>
<li>Better documentation</li>
<li>Better model performance</li>
<li>More backtesting</li>
<li>PHP application development</li>
</ul>
