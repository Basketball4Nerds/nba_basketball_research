<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg"><head><title>Chapter 2. Packages and Help Pages</title><link rel="stylesheet" type="text/css" href="core.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/><link rel="up" href="pt01.html" title="Part I. Project 1: Weighted Dice"/><link rel="prev" href="ch01.html" title="Chapter 1. The Very Basics"/><link rel="next" href="pt02.html" title="Part II. Project 2: Playing Cards"/></head><body><section class="chapter" title="Chapter 2. Packages and Help Pages" epub:type="chapter" id="PACKAGES"><div class="titlepage"><div><div><h2 class="title">Chapter 2. Packages and Help Pages</h2></div></div></div><p>You now have a function that simulates rolling a pair of dice. Let’s make things a little more interesting by weighting the dice in your favor. The house always wins, right? Let’s make the dice roll high numbers slightly more often than it rolls low numbers.</p><p>Before we weight the dice, we should make sure that they are fair to begin with. Two tools will help you do this: <span class="emphasis"><em>repetition</em></span> and <span class="emphasis"><em>visualization</em></span>. By coincidence, these tools are also two of the most useful superpowers in the world of data science.</p><p>We will repeat our dice rolls with a function called <code class="literal">replicate</code>, and we will visualize our rolls with a function called <code class="literal">qplot</code>. <code class="literal">qplot</code> does not come with R when you download it; <code class="literal">qplot</code> comes in a standalone R package. Many of the most useful R tools come in R packages, so let’s take a moment to look at what R packages are and how you can use them.</p><div class="sect1" title="Packages"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="_packages">Packages</h2></div></div></div><p>You’re not the only person writing your own functions with R. Many professors, programmers, and statisticians use R to design tools that can help people analyze data. They then make these tools free for anyone to use. To use these tools, you just have to download them. They come as preassembled collections of functions and objects called packages. <a class="xref" href="apb.html" title="Appendix B. R Packages">Appendix B</a> contains detailed instructions for downloading and updating R packages, but we’ll look at the basics here.</p><p>We’re going to use the <code class="literal">qplot</code> function to make some quick plots. <code class="literal">qplot</code> comes in the <span class="emphasis"><em>ggplot2</em></span> package, a popular package for making graphs. Before you can use <code class="literal">qplot</code>, or anything else in the ggplot2 package, you need to download and install it.<a id="id459756" class="indexterm"/><a id="id370332" class="indexterm"/><a id="id370338" class="indexterm"/><a id="id370347" class="indexterm"/></p><div class="sect2" title="install.packages"><div class="titlepage"><div><div><h3 class="title" id="_install_packages">install.packages</h3></div></div></div><p>Each R package is hosted at <a class="ulink" href="http://cran.r-project.org" target="_top">http://cran.r-project.org</a>, the same website that hosts R. However, you don’t need to visit the website to download an R package; you can download packages straight from R’s command line.<a id="id475147" class="indexterm"/><a id="id475152" class="indexterm"/><a id="id475141" class="indexterm"/><a id="id470618" class="indexterm"/> Here’s how:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Open RStudio.
</li><li class="listitem">
Make sure you are connected to the Internet.
</li><li class="listitem">
Run <span class="strong"><strong><code class="literal">install.packages("ggplot2")</code></strong></span> at the command line.
</li></ol></div><p>That’s it. R will have your computer visit the website, download ggplot2, and install the package in your hard drive right where R wants to find it. You now have the ggplot2 package. If you would like to install another package, replace ggplot2 with your package name in the code.</p></div><div class="sect2" title="library"><div class="titlepage"><div><div><h3 class="title" id="_library">library</h3></div></div></div><p>Installing a package doesn’t place its functions at your fingertips just yet: it simply places them in your hard drive. To use an R package, you next have to load it in your R session with the command <span class="strong"><strong><code class="literal">library("ggplot2")</code></strong></span>. If you would like to load a different package, replace ggplot2 with your package name in the code.<a id="id435006" class="indexterm"/><a id="id435002" class="indexterm"/></p><p>To see what this does, try an experiment. First, ask R to show you the <code class="literal">qplot</code> function. R won’t be able to find <code class="literal">qplot</code> because <code class="literal">qplot</code> lives in the ggplot2 package, which you haven’t loaded:</p><pre class="programlisting">qplot
<code class="c1">## Error: object 'qplot' not found</code></pre><p>Now load the ggplot2 package:</p><pre class="programlisting">library<code class="p">(</code><code class="s">"ggplot2"</code><code class="p">)</code></pre><p>If you installed the package with <code class="literal">install.packages</code> as instructed, everything should go fine. Don’t worry if you don’t see any results or messages. No news is fine news when loading a package. Don’t worry if you do see a message either; ggplot2 sometimes displays helpful start up messages. As long as you do not see anything that says “Error,” you are doing fine.</p><p>Now if you ask to see <code class="literal">qplot</code>, R will show you quite a bit of code (<code class="literal">qplot</code> is a long function):</p><pre class="programlisting">qplot
<code class="c1">## (quite a bit of code)</code></pre><p><a class="xref" href="apb.html" title="Appendix B. R Packages">Appendix B</a> contains many more details about acquiring and using packages. I recommend that you read it if you are unfamiliar with R’s package system. The main thing to remember is that you only need to install a package once, but you need to load it with <code class="literal">library</code> each time you wish to use it in a new R session. R will unload all of its packages each time you close RStudio.</p><p>Now that you’ve loaded <code class="literal">qplot</code>, let’s take it for a spin. <code class="literal">qplot</code> makes “quick plots.” If you give <code class="literal">qplot</code> two vectors of equal lengths, <code class="literal">qplot</code> will draw a scatterplot for you. <code class="literal">qplot</code> will use the first vector as a set of x values and the second vector as a set of y values. Look for the plot to appear in the Plots tab of the bottom-right pane in your RStudio window.<a id="id388301" class="indexterm"/><a id="id498128" class="indexterm"/><a id="id498112" class="indexterm"/><a id="id498121" class="indexterm"/><a id="id433753" class="indexterm"/></p><p>The following code will make the plot that appears in <a class="xref" href="ch02.html#FIGURE-DICE-QPLOT" title="Figure 2-1. qplot makes a scatterplot when you give it two vectors.">Figure 2-1</a>. Until now, we’ve been creating sequences of numbers with the <code class="literal">:</code> operator; but you can also create vectors of numbers with the <code class="literal">c</code> function.<a id="id435660" class="indexterm"/><a id="id435668" class="indexterm"/><a id="id510879" class="indexterm"/> Give <code class="literal">c</code> all of the numbers that you want to appear in the vector, separated by a comma. <code class="literal">c</code> stands for <span class="emphasis"><em>concatenate</em></span>, but you can think of it as “collect” or “combine”:</p><pre class="programlisting">x <code class="o">&lt;-</code> c<code class="p">(</code><code class="m">-1</code><code class="p">,</code> <code class="m">-0.8</code><code class="p">,</code> <code class="m">-0.6</code><code class="p">,</code> <code class="m">-0.4</code><code class="p">,</code> <code class="m">-0.2</code><code class="p">,</code> <code class="m">0</code><code class="p">,</code> <code class="m">0.2</code><code class="p">,</code> <code class="m">0.4</code><code class="p">,</code> <code class="m">0.6</code><code class="p">,</code> <code class="m">0.8</code><code class="p">,</code> <code class="m">1</code><code class="p">)</code>
x
<code class="c1">## -1.0 -0.8 -0.6 -0.4 -0.2  0.0  0.2  0.4  0.6  0.8  1.0</code>

y <code class="o">&lt;-</code> x<code class="o">^</code><code class="m">3</code>
y
<code class="c1">## -1.000 -0.512 -0.216 -0.064 -0.008  0.000  0.008</code>
<code class="c1">##  0.064  0.216  0.512  1.000</code>

qplot<code class="p">(</code>x<code class="p">,</code> y<code class="p">)</code></pre><div class="figure"><a id="FIGURE-DICE-QPLOT"/><div class="figure-contents"><div class="mediaobject"><img src="images/hopr_0201.png" alt="a scatterplot"/></div></div><div class="figure-title">Figure 2-1. qplot makes a scatterplot when you give it two vectors.</div></div><p>You don’t need to name your vectors <code class="literal">x</code> and <code class="literal">y</code>. I just did that to make the example clear. As you can see in <a class="xref" href="ch02.html#FIGURE-DICE-QPLOT" title="Figure 2-1. qplot makes a scatterplot when you give it two vectors.">Figure 2-1</a>, a scatterplot is a set of points, each plotted according to its x and y values. Together, the vectors <code class="literal">x</code> and <code class="literal">y</code> describe a set of 10 points. How did R match up the values in <code class="literal">x</code> and <code class="literal">y</code> to make these points? With element-wise execution, as we saw in <a class="xref" href="ch01.html#FIGURE-LANGUAGE-ELEMENT-WISE" title="Figure 1-3. When R performs element-wise execution, it matches up vectors and then manipulates each pair of elements independently.">Figure 1-3</a>.</p><p>Scatterplots are useful for visualizing the relationship between two variables. However, we’re going to use a different type of graph, a <span class="emphasis"><em>histogram</em></span>. A histogram visualizes the distribution of a single variable; it displays how many data points appear at each value of x.<a id="id429741" class="indexterm"/><a id="id429743" class="indexterm"/><a id="id497888" class="indexterm"/></p><p>Let’s take a look at a histogram to see if this makes sense. <code class="literal">qplot</code> will make a histogram whenever you give it only <span class="emphasis"><em>one</em></span> vector to plot. The following code makes the left-hand plot in <a class="xref" href="ch02.html#FIGURE-DICE-HIST" title="Figure 2-2. qplot makes a histogram when you give it a single vector.">Figure 2-2</a> (we’ll worry about the right-hand plot in just second).<a id="id475042" class="indexterm"/><a id="id369382" class="indexterm"/> To make sure our graphs look the same, use the extra argument <span class="strong"><strong><code class="literal">binwidth = 1</code></strong></span>:</p><pre class="programlisting">x <code class="o">&lt;-</code> c<code class="p">(</code><code class="m">1</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">3</code><code class="p">,</code> <code class="m">3</code><code class="p">)</code>
qplot<code class="p">(</code>x<code class="p">,</code> binwidth <code class="o">=</code> <code class="m">1</code><code class="p">)</code></pre><div class="figure"><a id="FIGURE-DICE-HIST"/><div class="figure-contents"><div class="mediaobject"><img src="images/hopr_0202.png" alt="a histogram"/></div></div><div class="figure-title">Figure 2-2. qplot makes a histogram when you give it a single vector.</div></div><p>This plot shows that our vector contains one value in the interval <code class="literal">[1, 2)</code> by placing a bar of height 1 above that interval. Similarly, the plot shows that the vector contains three values in the interval <code class="literal">[2, 3)</code> by placing a bar of height 3 in that interval. It shows that the vector contains two values in the interval <code class="literal">[3, 4)</code> by placing a bar of height 2 in that interval. In these intervals, the hard bracket, <code class="literal">[</code>, means that the first number is included in the interval. The parenthesis, <code class="literal">)</code>, means that the last number is <span class="emphasis"><em>not</em></span> included.<a id="id516281" class="indexterm"/><a id="id388511" class="indexterm"/><a id="id388517" class="indexterm"/><a id="id388524" class="indexterm"/></p><p>Let’s try another histogram. This code makes the right-hand plot in <a class="xref" href="ch02.html#FIGURE-DICE-HIST" title="Figure 2-2. qplot makes a histogram when you give it a single vector.">Figure 2-2</a>. Notice that there are five points with a value of 1 in <code class="literal">x2</code>. The histogram displays this by plotting a bar of height 5 above the interval x2 = [1, 2):</p><pre class="programlisting">x2 <code class="o">&lt;-</code> c<code class="p">(</code><code class="m">1</code><code class="p">,</code> <code class="m">1</code><code class="p">,</code> <code class="m">1</code><code class="p">,</code> <code class="m">1</code><code class="p">,</code> <code class="m">1</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">3</code><code class="p">,</code> <code class="m">3</code><code class="p">,</code> <code class="m">4</code><code class="p">)</code>
qplot<code class="p">(</code>x2<code class="p">,</code> binwidth <code class="o">=</code> <code class="m">1</code><code class="p">)</code></pre><div class="sidebar"><div class="sidebar-title">Exercise</div><p>Let <code class="literal">x3</code> be the following vector:</p><pre class="programlisting">x3 <code class="o">&lt;-</code> c<code class="p">(</code><code class="m">0</code><code class="p">,</code> <code class="m">1</code><code class="p">,</code> <code class="m">1</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">2</code><code class="p">,</code> <code class="m">3</code><code class="p">,</code> <code class="m">3</code><code class="p">,</code> <code class="m">4</code><code class="p">)</code></pre><p>Imagine what a histogram of <code class="literal">x3</code> would look like. Assume that the histogram has a bin width of 1. How many bars will the histogram have? Where will they appear? How high will each be?</p><p>When you are done, plot a histogram of <code class="literal">x3</code> with <code class="literal">binwidth = 1</code>, and see if you are right.</p></div><p>You can make a histogram of <code class="literal">x3</code> with <code class="literal">qplot(x3, binwidth = 1)</code>. The histogram will look like a symmetric pyramid. The middle bar will have a height of 3 and will appear above <code class="literal">[2, 3)</code>, but be sure to try it and see for yourself.</p><p>You can use a histogram to display visually how common different values of <code class="literal">x</code> are. Numbers covered by a tall bar are no more common than numbers covered by a short bar.</p><p>How can you use a histogram to check the accuracy of your dice?<a id="id386347" class="indexterm"/></p><p>Well, if you roll your dice many times and keep track of the results, you would expect some numbers to occur more than others. This is because there are more ways to get some numbers by adding two dice together than to get other numbers, as shown in <a class="xref" href="ch02.html#FIGURE-DICE-PROBS" title="Figure 2-3. Each individual dice combination should occur with the same frequency. As a result, some sums will occur more often than others. With fair dice, each sum should appear in proportion to the number of combinations that make it.">Figure 2-3</a>.<a id="id386363" class="indexterm"/></p><p>If you roll your dice many times and plot the results with <code class="literal">qplot</code>, the histogram will show you how often each sum appeared. The sums that occurred most often will have the highest bars. The histogram should look like the pattern in <a class="xref" href="ch02.html#FIGURE-DICE-PROBS" title="Figure 2-3. Each individual dice combination should occur with the same frequency. As a result, some sums will occur more often than others. With fair dice, each sum should appear in proportion to the number of combinations that make it.">Figure 2-3</a> if the dice are fairly weighted.</p><p>This is where <code class="literal">replicate</code> comes in. <code class="literal">replicate</code> provides an easy way to repeat an R command many times.<a id="id511753" class="indexterm"/><a id="id511759" class="indexterm"/><a id="id506026" class="indexterm"/> To use it, first give <code class="literal">replicate</code> the number of times you wish to repeat an R command, and then give it the command you wish to repeat. <code class="literal">replicate</code> will run the command multiple times and store the results as a vector:</p><pre class="programlisting">replicate<code class="p">(</code><code class="m">3</code><code class="p">,</code> <code class="m">1</code> <code class="o">+</code> <code class="m">1</code><code class="p">)</code>
<code class="c1">## 2 2 2</code>

replicate<code class="p">(</code><code class="m">10</code><code class="p">,</code> roll<code class="p">())</code>
<code class="c1">## 3  7  5  3  6  2  3  8 11  7</code></pre><div class="figure"><a id="FIGURE-DICE-PROBS"/><div class="figure-contents"><div class="mediaobject"><img src="images/hopr_0203.png" alt="possible dice combinations"/></div></div><div class="figure-title">Figure 2-3. Each individual dice combination should occur with the same frequency. As a result, some sums will occur more often than others. With fair dice, each sum should appear in proportion to the number of combinations that make it.</div></div><p>A histogram of your first 10 rolls probably won’t look like the pattern shown in <a class="xref" href="ch02.html#FIGURE-DICE-PROBS" title="Figure 2-3. Each individual dice combination should occur with the same frequency. As a result, some sums will occur more often than others. With fair dice, each sum should appear in proportion to the number of combinations that make it.">Figure 2-3</a>. Why not? There is too much randomness involved.<a id="id460249" class="indexterm"/> Remember that we use dice in real life because they are effective random number generators. Patterns of long run frequencies will only appear <span class="emphasis"><em>over the long run</em></span>. So let’s simulate 10,000 dice rolls and plot the results. Don’t worry; <code class="literal">qplot</code> and <code class="literal">replicate</code> can handle it. The results appear in <a class="xref" href="ch02.html#FIGURE-DICE-FAIR" title="Figure 2-4. The behavior of our dice suggests that they are fair. Seven occurs more often than any other number, and frequencies diminish in proportion to the number of die combinations that create each number.">Figure 2-4</a>:</p><pre class="programlisting">rolls <code class="o">&lt;-</code> replicate<code class="p">(</code><code class="m">10000</code><code class="p">,</code> roll<code class="p">())</code>
qplot<code class="p">(</code>rolls<code class="p">,</code> binwidth <code class="o">=</code> <code class="m">1</code><code class="p">)</code></pre><p>The results suggest that the dice are fair. Over the long run, each number occurs in proportion to the number of combinations that generate it.</p><p>Now how can you bias these results? The previous pattern occurs because each underlying combination of dice (e.g., (3,4)) occurs with the same frequency. If you could increase the probability that a 6 is rolled on either die, then any combination with a six in it will occur more often than any combination without a six in it. The combination (6, 6) would occur most of all. This won’t make the dice add up to 12 more often than they add up to seven, but it will skew the results toward the higher numbers.<a id="id429112" class="indexterm"/></p><div class="figure"><a id="FIGURE-DICE-FAIR"/><div class="figure-contents"><div class="mediaobject"><img src="images/hopr_0204.png" alt="Behavior of fair dice"/></div></div><div class="figure-title">Figure 2-4. The behavior of our dice suggests that they are fair. Seven occurs more often than any other number, and frequencies diminish in proportion to the number of die combinations that create each number.</div></div><p>To put it another way, the probability of rolling any single number on a fair die is 1/6. I’d like you to change the probability to 1/8 for each number below six, and then increase the probability of rolling a six to 3/8:</p><div class="informaltable"><table style="width: 50%; border-collapse: collapse; border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col_1"/><col class="col_2"/><col class="col_3"/></colgroup><thead><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Number</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Fair probability</td><td style="border-bottom: 0.5pt solid ; ">Weighted probability</td></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1/6</p></td><td style="border-bottom: 0.5pt solid ; "><p>1/8</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>2</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1/6</p></td><td style="border-bottom: 0.5pt solid ; "><p>1/8</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>3</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1/6</p></td><td style="border-bottom: 0.5pt solid ; "><p>1/8</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>4</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1/6</p></td><td style="border-bottom: 0.5pt solid ; "><p>1/8</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>5</p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><p>1/6</p></td><td style="border-bottom: 0.5pt solid ; "><p>1/8</p></td></tr><tr><td style="border-right: 0.5pt solid ; "><p>6</p></td><td style="border-right: 0.5pt solid ; "><p>1/6</p></td><td><p>3/8</p></td></tr></tbody></table></div><p>You can change the probabilities by adding a new argument to the <code class="literal">sample</code> function. I’m not going to tell you what the argument is; instead I’ll point you to the help page for the <code class="literal">sample</code> function. What’s that? R functions come with help pages? Yes they do, so let’s learn how to read one.<a id="id515195" class="indexterm"/><a id="id515186" class="indexterm"/></p></div></div><div class="sect1" title="Getting Help with Help Pages"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="_getting_help_with_help_pages">Getting Help with Help Pages</h2></div></div></div><p>There are over 1,000 functions at the core of R, and new R functions are created all of the time.<a id="id512783" class="indexterm"/><a id="id512773" class="indexterm"/><a id="id512785" class="indexterm"/><a id="id512792" class="indexterm"/><a id="id451524" class="indexterm"/><a id="id451532" class="indexterm"/> This can be a lot of material to memorize and learn! Luckily, each R function comes with its own help page, which you can access by typing the function’s name after a question mark. For example, each of these commands will open a help page. Look for the pages to appear in the Help tab of RStudio’s bottom-right pane:</p><pre class="programlisting"><code class="o">?</code>sqrt
<code class="o">?</code>log10
<code class="o">?</code>sample</pre><p>Help pages contain useful information about what each function does. These help pages also serve as code documentation, so reading them can be bittersweet. They often seem to be written for people who already understand the function and do not need help.</p><p>Don’t let this bother you—you can gain a lot from a help page by scanning it for information that makes sense and glossing over the rest. This technique will inevitably bring you to the most helpful part of each help page: the bottom. Here, almost every help page includes some example code that puts the function in action. Running this code is a great way to learn by example.</p><div class="warning" title="Warning" epub:type="warning"><h3 class="title">Warning</h3><p>If a function comes in an R package, R won’t be able to find its help page unless the package is loaded.</p></div><div class="sect2" title="Parts of a Help Page"><div class="titlepage"><div><div><h3 class="title" id="_parts_of_a_help_page">Parts of a Help Page</h3></div></div></div><p>Each help page is divided into sections. Which sections appear can vary from help page to help page, but you can usually expect to find these useful topics:</p><div class="variablelist"><dl><dt><span class="term">
Description
</span></dt><dd>
  A short summary of what the function does.
</dd><dt><span class="term">
Usage
</span></dt><dd>
  An example of how you would type the function. Each argument of the function will appear in the order R expects you to supply it (if you don’t use argument names).
</dd><dt><span class="term">
Arguments
</span></dt><dd>
  A list of each argument the function takes, what type of information R expects you to supply for the argument, and what the function will do with the information.
</dd><dt><span class="term">
Details
</span></dt><dd>
  A more in-depth description of the function and how it operates. The details section also gives the function author a chance to alert you to anything you might want to know when using the function.
</dd><dt><span class="term">
Value
</span></dt><dd>
  A description of what the function returns when you run it.
</dd><dt><span class="term">
See Also
</span></dt><dd>
  A short list of related R functions.
</dd><dt><span class="term">
Examples
</span></dt><dd>
  Example code that uses the function and is guaranteed to work. The examples section of a help page usually demonstrates a couple different ways to use a function. This helps give you an idea of what the function is capable of.
</dd></dl></div><p>If you’d like to look up the help page for a function but have forgotten the function’s name, you can search by keyword.<a id="id443885" class="indexterm"/><a id="id443874" class="indexterm"/> To do this, type two question marks followed by a keyword in R’s command line. R will pull up a list of links to help pages related to the keyword. You can think of this as the help page for the help page:</p><pre class="programlisting"><code class="o">??</code>log</pre><p>Let’s take a stroll through <code class="literal">sample</code>’s help page. Remember: we’re searching for anything that could help you change the probabilities involved in the sampling process. I’m not going to reproduce the whole help page here (just the juiciest parts), so you should follow along on your computer.</p><p>First, open the help page. It will appear in the same pane in RStudio as your plots did (but in the Help tab, not the Plots tab):</p><pre class="programlisting"><code class="o">?</code>sample</pre><p>What do you see? Starting from the top:</p><pre class="screen">Random Samples and Permutations

Description
    sample takes a sample of the specified size from the elements of x using
either with or without replacement.</pre><p>So far, so good. You knew all of that. The next section, Usage, has a possible clue. It mentions an argument called <code class="literal">prob</code>:</p><pre class="screen">Usage
    sample(x, size, replace = FALSE, prob = NULL)</pre><p>If you scroll down to the arguments section, the description of <code class="literal">prob</code> sounds <span class="emphasis"><em>very</em></span> promising:</p><pre class="screen">A vector of probability weights for obtaining the elements of the vector being
sampled.</pre><p>The Details section confirms our suspicions. In this case, it also tells you how to proceed:</p><pre class="screen">The optional prob argument can be used to give a vector of weights for obtaining
the elements of the vector being sampled. They need not sum to one, but they
should be nonnegative and not all zero.</pre><p>Although the help page does not say it here, these weights will be matched up to the elements being sampled in element-wise fashion. The first weight will describe the first element, the second weight the second element, and so on. This is common practice in R.</p><p>Reading on:</p><pre class="screen">If replace is true, Walker's alias method (Ripley, 1987) is used...</pre><p>Okay, that looks like time to start skimming. We should have enough info now to figure out how to weight our dice.</p><div class="sidebar"><div class="sidebar-title">Exercise</div><p>Rewrite the <code class="literal">roll</code> function to roll a pair of weighted dice:</p><pre class="programlisting">roll <code class="o">&lt;-</code> <code class="kr">function</code><code class="p">()</code> <code class="p">{</code>
  die <code class="o">&lt;-</code> <code class="m">1</code><code class="o">:</code><code class="m">6</code>
  dice <code class="o">&lt;-</code> sample<code class="p">(</code>die<code class="p">,</code> size <code class="o">=</code> <code class="m">2</code><code class="p">,</code> replace <code class="o">=</code> <code class="kc">TRUE</code><code class="p">)</code>
  sum<code class="p">(</code>dice<code class="p">)</code>
<code class="p">}</code></pre><p>You will need to add a <code class="literal">prob</code> argument to the <code class="literal">sample</code> function inside of <code class="literal">roll</code>. This argument should tell <code class="literal">sample</code> to sample the numbers one through five with probability 1/8 and the number 6 with probability 3/8.</p><p>When you are finished, read on for a model answer.</p></div><p>To weight your dice, you need to add a <code class="literal">prob</code> argument with a vector of weights to <code class="literal">sample</code>, like this:</p><pre class="programlisting">roll <code class="o">&lt;-</code> <code class="kr">function</code><code class="p">()</code> <code class="p">{</code>
  die <code class="o">&lt;-</code> <code class="m">1</code><code class="o">:</code><code class="m">6</code>
  dice <code class="o">&lt;-</code> sample<code class="p">(</code>die<code class="p">,</code> size <code class="o">=</code> <code class="m">2</code><code class="p">,</code> replace <code class="o">=</code> <code class="kc">TRUE</code><code class="p">,</code>
    prob <code class="o">=</code> c<code class="p">(</code><code class="m">1</code><code class="o">/</code><code class="m">8</code><code class="p">,</code> <code class="m">1</code><code class="o">/</code><code class="m">8</code><code class="p">,</code> <code class="m">1</code><code class="o">/</code><code class="m">8</code><code class="p">,</code> <code class="m">1</code><code class="o">/</code><code class="m">8</code><code class="p">,</code> <code class="m">1</code><code class="o">/</code><code class="m">8</code><code class="p">,</code> <code class="m">3</code><code class="o">/</code><code class="m">8</code><code class="p">))</code>
  sum<code class="p">(</code>dice<code class="p">)</code>
<code class="p">}</code></pre><p>This will cause <code class="literal">roll</code> to pick 1 through 5 with probability 1/8 and 6 with probability 3/8.</p><p>Overwrite your previous version of <code class="literal">roll</code> with the new function (by running the previous code snippet in your command line). Then visualize the new long-term behavior of your dice. I’ve put the results in <a class="xref" href="ch02.html#FIGURE-DICE-WEIGHTED" title="Figure 2-5. The dice are now clearly biased towards high numbers, since high sums occur much more often than low sums.">Figure 2-5</a> next to our original results:</p><pre class="programlisting">rolls <code class="o">&lt;-</code> replicate<code class="p">(</code><code class="m">10000</code><code class="p">,</code> roll<code class="p">())</code>
qplot<code class="p">(</code>rolls<code class="p">,</code> binwidth <code class="o">=</code> <code class="m">1</code><code class="p">)</code></pre><p>This confirms that we’ve effectively weighted the dice. High numbers occur much more often than low numbers. The remarkable thing is that this behavior will only be apparent when you examine long-term frequencies. On any single roll, the dice will appear to behave randomly. This is great news if you play Settlers of Catan (just tell your friends you lost the dice), but it should be disturbing if you analyze data, because it means that bias can easily occur without anyone noticing it in the short run.</p><div class="figure"><a id="FIGURE-DICE-WEIGHTED"/><div class="figure-contents"><div class="mediaobject"><img src="images/hopr_0205.png" alt="Behavior of weighted dice"/></div></div><div class="figure-title">Figure 2-5. The dice are now clearly biased towards high numbers, since high sums occur much more often than low sums.</div></div></div><div class="sect2" title="Getting More Help"><div class="titlepage"><div><div><h3 class="title" id="_getting_more_help">Getting More Help</h3></div></div></div><p>R also comes with a super active community of users that you can turn to for <a class="ulink" href="http://bit.ly/r-help" target="_top">help on the R-help mailing list</a>. You can email the list with questions, but there’s a great chance that your question has already been answered. Find out by searching the <a class="ulink" href="http://bit.ly/R_archives" target="_top">archives</a>.<a id="id385844" class="indexterm"/><a id="id476190" class="indexterm"/></p><p>Even better than the R-help list is <a class="ulink" href="http://stackoverflow.com" target="_top">Stack Overflow</a>, a website that allows programmers to answer questions and users to rank answers based on helpfulness.<a id="id437665" class="indexterm"/> Personally, I find the Stack Overflow format to be more user-friendly than the R-help email list (and the respondents to be more human friendly). You can submit your own question or search through Stack Overflow’s previously answered questions related to R. There are over 30,000.</p><p>For both the R help list and Stack Overflow, you’re more likely to get a useful answer if you provide a reproducible example with your question. This means pasting in a short snippet of code that users can run to arrive at the bug or question you have in mind.</p></div></div><div class="sect1" title="Summary"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="_summary_2">Summary</h2></div></div></div><p>R’s packages and help pages can make you a more productive programmer. You saw in <a class="xref" href="ch01.html" title="Chapter 1. The Very Basics">Chapter 1</a> that R gives you the power to write your own functions that do specific things, but often the function that you want to write will already exist in an R package. Professors, programmers, and scientists have developed over 5,000 packages for you to use, which can save you valuable programming time. To use a package, you need to install it to your computer once with <code class="literal">install.packages</code>, and then load it into each new R session with <code class="literal">library</code>.</p><p>R’s help pages will help you master the functions that appear in R and its packages. Each function and data set in R has its own help page. Although help pages often contain advanced content, they also contain valuable clues and examples that can help you learn how to use a function.</p><p>You have now seen enough of R to learn by doing, which is the best way to learn R. You can make your own R commands, run them, and get help when you need to understand something that I have not explained. I encourage you to experiment with your own ideas in R as you read through the next two projects.</p></div><div class="sect1" title="Project 1 Wrap-up"><div class="titlepage"><div><div><h2 class="title" style="clear: both" id="_project_1_wrap_up">Project 1 Wrap-up</h2></div></div></div><p>You’ve done more in this project than enable fraud and gambling; you’ve also learned how to speak to your computer in the language of R. R is a language like English, Spanish, or German, except R helps you talk to computers, not humans.</p><p>You’ve met the nouns of the R language, objects. And hopefully you guessed that functions are the verbs (I suppose function arguments would be the adverbs). When you combine functions and objects, you express a complete thought. By stringing thoughts together in a logical sequence, you can build eloquent, even artistic statements. In that respect, R is not that different than any other language.<a id="id437672" class="indexterm"/><a id="id479998" class="indexterm"/><a id="id451098" class="indexterm"/></p><p>R shares another characteristic of human languages: you won’t feel very comfortable speaking R until you build up a vocabulary of R commands to use. Fortunately, you don’t have to be bashful. Your computer will be the only one to “hear” you speak R. Your computer is not very forgiving, but it also doesn’t judge. Not that you need to worry; you’ll broaden your R vocabulary tremendously between here and the end of the book.</p><p>Now that you can use R, it is time to become an expert at using R to do data science. The foundation of data science is the ability to store large amounts of data and recall values on demand.<a id="id389658" class="indexterm"/> From this, all else follows—manipulating data, visualizing data, modeling data, and more. However, you cannot easily store a data set in your mind by memorizing it. Nor can you easily store a data set on paper by writing it down. The only efficient way to store large amounts of data is with a computer. In fact, computers are so efficient that their development over the last three decades has completely changed the type of data we can accumulate and the methods we can use to analyze it. In short, computer data storage has driven the revolution in science that we call data science.</p><p><a class="xref" href="pt02.html" title="Part II. Project 2: Playing Cards">Part II</a> will make you part of this revolution by teaching you how to use R to store data sets in your computer’s memory and how to retrieve and manipulate data once it’s there.</p></div></section></body></html>
